<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
    	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=8" />
		<title>Advance Tutorial 06: LookAt Behavior - StarCraft II Art Tools Documentation</title>
        <link rel="shortcut icon" href="common/sc2.ico" type="image/x-icon"/>
        <link rel="stylesheet" type="text/css" href="common/tutorial.css" />
        <script type="text/javascript" src="common/jquery-1.6.1.min.js" ></script>
        <script type="text/javascript" src="common/tutorial.js" ></script>
    </head>
    <body>
        <div class="home"><a target="_top" href="index.html">Documentation Home</a></div>
        <div class="wrap">
            <div class="content">
                <h1>Advance Tutorial 06: LookAt Behavior</h1>
                <img src="resource/img/LookAt_Preview_0000_AppleTest.png" title="An image showing the progress achieved during this tutorial: The Waterbat's Head and Chest is setup to look at an object in the scene."/>
                <p>In StarCraft II, the LookAt Behavior is mainly used in the Cutscene Editor to direct who or what a character is looking at in a scene. This Turret Behavior allows you to organize a subset of bones that will procedurally point in a direction. In this tutorial we’ll be setting up the Head and Chest of the Waterbat to look at an object in the Cutscene Editor.</p>
                <h2>Getting Started</h2>
                <ol>
                    <li>
                        <p>Open <em>'Waterbat_LookAt_Tutorial01_Start.max'</em>.  It contains an animated Waterbat that we will be adding the LookAt behavior to.</p>
                        <img class="zoom" src="resource/img/LookAt_Viewport_0000_Initial.png" title="The 'Stand' animation in Waterbat_LookAt_Tutorial01_Start.max."/>
                    </li>
                </ol>
                <h2>Create a Turret Behavior for the Head</h2>
				<p>The first thing that we are going to do is create a Turret Behavior for the Head. A Turret Behavior is a collection of bones that is assigned a manipulator to control their alignment.</p>
                <ol>
                    <li value="2">
                        <p>Click <em>SC2ArtTools > Behavior > Behavior Editor</em> to open the Behavior Editor.</p>
                    </li>
                </ol>
                <ol>
                    <li value="3">
                        <p>Once the Behavior Editor opens, click the <em>'Add a Turret Behavior'</em> button (highlighted below) and rename the Turret Behavior to <em>Head</em> (also highlighted below).</p>
						<img class="zoom" src="resource/img/LookAt_BehaviorEditor_0000_HeadTurret.png" title="Rename the Turret Behavior to Head."/>
                    </li>
                </ol>
                <ol>
                    <li value="4">
                        <p>Select the Head bone in the viewport called <em>'BoneHead'</em>, once you’ve selected the Head bone, go back to the Behavior Editor and right-click on top of <em>'Turret_Behavior: Head'</em> and click <em>'Add Bones From Viewport Selection'</em>.</p>
						<img class="zoom" src="resource/img/LookAt_BehaviorEditor_0001_HeadAddBones.png" title="Select Head bone to add to the Turret Behavior."/>
                    </li>
                </ol>
                <ol>
                    <li value="5">
                        <p>Now that we’ve added the Head bone, click on the <em>'+'</em> symbol that now appears next to 'Turret_Behavior: Head' and then select <em>'1: Obj – Bone Geometry: BoneHead'</em> (highlighted below).</p>
						<img class="zoom" src="resource/img/LookAt_BehaviorEditor_0002_BoneHead.png" title="The added bone should now show up.  Select it."/>
                    </li>
                </ol>
                <ol>
                    <li value="6">
                        <p>Once you have selected '1: Obj – Bone Geometry: BoneHead', press the <em>'Align To World'</em> button and make sure to mark the checkbox for <em>'Use as main turret bone'</em> (shown below).</p>
						<img class="zoom" src="resource/img/LookAt_BehaviorEditor_0003_HeadAlign.png" title="Setup the first bone behavior by aligning it properly, and setting it as the main turret bone."/>
                    </li>
                </ol>
                <ol>
                    <li value="7">
                        <p>Once you’ve pressed the 'Align To World' button, the BoneHead_Axis indicator should look like the image below. Make sure that the T is on top, the L is on the left-hand side of the unit, and the F is facing the front.</p>
						<img class="zoom" src="resource/img/LookAt_Viewport_0001_BoneHeadAxis.png" title="The indicator is a set of axes and colored arcs to help you visualize the values in the behavior."/>
                    </li>
                </ol>
                <ol>
                    <li value="8">
                        <p>Now we’ll adjust the minimum and maximum limits for the Head yaw and pitch. We’ll keep the Yaw-Weight at 100&#37; since there is only one bone in this Turret Behavior. Set the Yaw-Limit Min to <em>-45.0</em> degrees and the Yaw-Limit Max to <em>45.0</em> degrees. This allows the Head to move up to 45 degrees to the right or the left. Then set the Pitch-Limit Min to <em>-15.0</em> and the Pitch-Limit Max to <em>40.0</em>. These are different so he can only look down a little, but he has a lot higher range when looking up. </p>
						<img class="zoom" src="resource/img/LookAt_BehaviorEditor_0004_HeadYaw.png" title="Locations and example values for yaw and pitch limits."/>
                    </li>
                </ol>
                <ol>
                    <li value="9">
                        <p>Now that the Head Turret Behavior is set up it should look like the image below.</p>
						<img class="zoom" src="resource/img/LookAt_Viewport_0002_CheckHeadTurret.png" title="Example of the final look of the indicator."/>
                    </li>
                </ol>
                <h2>Add a Turret Behavior for the Chest</h2>
				<p>Now we’re going to create a Turret Behavior for the Chest that is similar to the Head setup, except the Chest will have 2 bones.</p>
                <ol>
                    <li value="10">
                        <p>Go back to the Behavior Editor and click the <em>'Add a Turret Behavior'</em> button again (highlighted below) and rename the new Turret Behavior to <em>Chest</em> (also highlighted below).</p> 
                        <img class="zoom" src="resource/img/LookAt_BehaviorEditor_0005_ChestTurret.png" title="Add the Chest behavior now, in the same way Head was added."/>
                    </li>
                </ol>
                <ol>
                    <li value="11">
                        <p>Select the two Chest bones in the viewport called <em>'BoneBack01'</em> and <em>'BoneBack02'</em>, once you’ve selected the 2 Chest bones, go back to the Behavior Editor and right-click on top of <em>'Turret_Behavior: Chest'</em> and click <em>'Add Bones From Viewport Selection'</em>.</p> 
                        <img class="zoom" src="resource/img/LookAt_BehaviorEditor_0006_ChestAddBones.png" title="Use Right Click to add bones from the viewport selection."/>
                    </li>
                </ol>
                <ol>
                    <li value="12">
                        <p>Now that we’ve added the 2 Chest bones, click on the <em>'+'</em> symbol that now appears next to 'Turret_Behavior: Chest' and then select <em>'1: Obj – Bone Geometry: BoneBack01'</em> (highlighted below).</p> 
                        <img class="zoom" src="resource/img/LookAt_BehaviorEditor_0007_BoneBack01.png" title="Expand the Chest behavior to edit the values."/>
                    </li>
                </ol>
                <ol>
                    <li value="13">
                        <p>Now let’s adjust the minimum and maximum limits for BoneBack01 yaw and pitch. We’ll put the Yaw-Weight and the Pitch-Weight at <em>30&#37;</em> since we want the lower Chest bone to move less. Set the Yaw-Limit Min to <em>-35.0</em> degrees and the Yaw-Limit Max to <em>35.0</em> degrees. This allows the lower Chest to move up to 35 degrees to the right or the left. Then set the Pitch-Limit Min to <em>-20.0</em> and the Pitch-Limit Max to <em>20.0</em>.</p> 
                        <img class="zoom" src="resource/img/LookAt_BehaviorEditor_0008_BoneBack01Yaw.png" title="Set the limits for the first back bone in the same fashion as they were set on the head."/>
                    </li>
                </ol>
                <ol>
                    <li value="14">
                        <p>Now select <em>'2: Obj – Bone Geometry: BoneBack02'</em> to adjust the minimum and maximum limits for BoneBack02. We’ll put the Yaw-Weight at <em>70&#37;</em> since we want the upper Chest bone to move more than the lower one. Set the Yaw-Limit Min to <em>-45.0</em> degrees and the Yaw-Limit Max to <em>45.0</em> degrees. This allows the upper Chest to move up to 45 degrees to the right or the left. Then set the Pitch-Limit Min to <em>-30.0</em> and the Pitch-Limit Max to <em>30.0</em>.</p> 
                        <img class="zoom" src="resource/img/LookAt_BehaviorEditor_0009_BoneBack02Yaw.png" title="Repeat the process for the next back bone."/>
                    </li>
                </ol>
				<h2>Test the LookAt Behavior in Previewer</h2>
                <ol>
                    <li value="15">
                        <p>Use <em>'SC2ArtTools > Export > Preview'</em> to launch the Cutscene Editor to test the LookAt Behavior. When the Waterbat loads, it should be playing its <em>'Stand'</em> animation.</p>
                        <img class="zoom" src="resource/img/LookAt_Viewport_0003_Preview.png" title="Preview the model with 'SC2ArtTools &gt; Export &gt; Preview'."/>
                    </li>
                </ol>
                <ol>
                    <li value="16">
                        <p>Now we're going to add an apple to the scene for the Waterbat to look at, but any model should work for this test. Search for the word <em>'Apple'</em> in the Files Pane by typing it in and hitting <em>Enter</em>. Select the model named <em>'Shape Apple'</em> and press the <em>Add</em> button. You should now see an apple in the middle of your scene. If you don’t see the Models Tab in the top left, then hit the <em>F</em> key on your keyboard to view the Files Pane.</p>
                        <img class="zoom" src="resource/img/LookAt_Preview_0001_AddApple.png" title="Place another model in the scene with the Models panel."/>
                    </li>
                </ol>
                <ol>
                    <li value="17">
                        <p>Put the animation timeline to zero by pressing the <em>'Move to Start'</em> button (highlighted below). Now right-click on top of the Waterbat model in the Scene Object List and click <em>LookAt...</em> to assign a model to look at.</p>
                        <img class="zoom" src="resource/img/LookAt_Preview_0002_AddLookAt.png" title="Use the Waterbat's context menu to enable Look At."/>
                    </li>
                </ol>
                <ol>
                    <li value="18">
                        <p>When the Look At Window pops up, select <em>'Shape Apple'</em> from the top dropdown and press <em>OK</em>.</p>
                        <img src="resource/img/LookAt_LookAtWindow_0000_SelectApple.png" title="Select your look at target from the prompt.  You need to choose both the model and the reference point on the model."/>
                    </li>
                </ol>
                <ol>
                    <li value="19">
                        <p>Right click on the purple timeline block that says <em>'Look At: Shape Apple Type:'</em> and click on <em>'Look At Type > Instant Standing'</em> (shown below).</p>
                        <img class="zoom" src="resource/img/LookAt_Preview_0003_LookAtType.png" title="Choose the way the Look At should behave.  For this example, 'Instant Standing' gives the most direct feedback, but others could be chosen for artistic purposes."/>
                    </li>
                </ol>
                <ol>
                    <li value="20">
                        <p>Select the apple and move it around the scene. The Waterbat’s Head should now be following the apple around.</p>
                        <img class="zoom" src="resource/img/LookAt_Preview_0004_TestRight.png" title="The apple moved to the right should turn the Waterbat to the right."/>
						<br><img class="zoom" src="resource/img/LookAt_Preview_0005_TestLeft.png" title="A quick move to the left should make the Waterbat look that way instead."/>
                    </li>
                </ol>
            </div>
        </div>
    </body>
</html>
